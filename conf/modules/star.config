/*
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    Config file for defining DSL2 per module options and publishing paths
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    Available keys to override module options:
        ext.args   = Additional arguments appended to command in module.
        ext.args2  = Second set of arguments appended to command in module (multi-tool modules).
        ext.args3  = Third set of arguments appended to command in module (multi-tool modules).
        ext.prefix = File name prefix for output files.
----------------------------------------------------------------------------------------
*/


/*
  Keep everything (unmapped, junctions)
  in the output BAM file for ABRA2 to
  realign downstream and create a junctions
  file.
/*

// template for now can extrapolate when comes to fusion : https://github.com/nf-core/rnafusion/blob/master/conf/modules.config

process {

    withName: 'STAR_2PASS_BASIC' {
        ext.when = { ( params.rna_quant.contains('salmon') || params.rna_fusion.contains('star_fusion') ) }
        ext.args = [ "",
        "--readFilesCommand zcat",
        "--twopassMode Basic",
        "--outSAMtype BAM SortedByCoordinate",
        "--outReadsUnmapped None",
        "--chimOutType Junctions WithinBam",
        "--outSamunmapped Within",
        "--chimOutType Junctions"
        ].join(' ').trim()
        publishDir = [
            path: { "${params.outdir}/star/${meta.id}" },
            mode: params.publish_dir_mode,
            saveAs: { filename -> filename.equals('versions.yml') ? null : filename }
        ]
    }

}
